<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Pulsar configuration · Apache Pulsar</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;style type=&quot;text/css&quot;&gt;"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="zh-CN"/><meta property="og:title" content="Pulsar configuration · Apache Pulsar"/><meta property="og:type" content="website"/><meta property="og:url" content="https://pulsar.apache.org/"/><meta property="og:description" content="&lt;style type=&quot;text/css&quot;&gt;"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://pulsar.apache.org/img/pulsar.svg"/><link rel="shortcut icon" href="/img/pulsar.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://pulsar.apache.org/blog/atom.xml" title="Apache Pulsar Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://pulsar.apache.org/blog/feed.xml" title="Apache Pulsar Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-102219959-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/css/code-blocks-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/custom.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zh-CN"><img class="logo" src="/img/pulsar.svg" alt="Apache Pulsar"/></a><a href="/zh-CN/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/zh-CN/next/getting-started-standalone" target="_self">文档</a></li><li class=""><a href="/zh-CN/download" target="_self">下载</a></li><li class="siteNavGroupActive"><a href="/docs/zh-CN/next/client-libraries" target="_self">客户端</a></li><li class=""><a href="#restapis" target="_self">REST API</a></li><li class=""><a href="#cli" target="_self">命令行</a></li><li class=""><a href="/blog/" target="_self">博客</a></li><li class=""><a href="#community" target="_self">社区</a></li><li class=""><a href="#apache" target="_self">Apache</a></li><li class=""><a href="https://pulsar-next.staged.apache.org/" target="_self">New Website (Beta)</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/next/reference-configuration">English</a></li><li><a href="/docs/ja/next/reference-configuration">日本語</a></li><li><a href="/docs/fr/next/reference-configuration">Français</a></li><li><a href="/docs/ko/next/reference-configuration">한국어</a></li><li><a href="/docs/zh-TW/next/reference-configuration">繁體中文</a></li><li><a href="https://crowdin.com/project/apache-pulsar" target="_blank" rel="noreferrer noopener">参与翻译</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>参考</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Get Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/getting-started-standalone">Run Pulsar locally</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/getting-started-docker">Run Pulsar in Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/getting-started-helm">Run Pulsar in Kubernetes</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">概念和架构</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-messaging">消息</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-architecture-overview">架构</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-clients">客户端</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-replication">跨机房复制</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-multi-tenancy">多租户</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-authentication">认证和授权</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-topic-compaction">消息压缩</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-proxy-sni-routing">Pulsar Proxy 支持 SNI 路由</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-multiple-advertised-listeners">配置 Advertised 监听器</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Pulsar Schema</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/schema-get-started">开始</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/schema-understand">理解 schema</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/schema-evolution-compatibility">Schema 演化和兼容</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/schema-manage">管理 Schema</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Pulsar Functions</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-runtime">设置：配置 Pulsar Functions 运行时</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-worker">设置：Pulsar Functions Worker</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-develop">操作：开发</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-package">如何打包</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-debug">操作：调试</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-deploy">操作：部署</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-cli">参考：命令</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/window-functions-context">窗口函数：上下文</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Pulsar IO</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-quickstart">开始</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-use">使用</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-debug">调试</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-connectors">内置 connector</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-cdc">CDC connector</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-develop">开发</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-cli">CLI</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Pulsar SQL</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/sql-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/sql-getting-started">查询数据</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/sql-deployment-configurations">配置和部署</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/sql-rest-api">REST API</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">层级存储</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/tiered-storage-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/tiered-storage-aws">亚马逊 AWS S3 offloader</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/tiered-storage-gcs">GCS offloader</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/tiered-storage-filesystem">Filesystem offloader</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/tiered-storage-azure">Azure BlobStore offloader</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/tiered-storage-aliyun">阿里云 OSS offloader</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">事务</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/txn-why">为什么需要事务？</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/txn-what">什么是事务？</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/txn-how">事务运行原理</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/txn-use">如何使用事务？</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/txn-monitor">如何监控事务？</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Kubernetes (Helm)</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/helm-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/helm-prepare">准备</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/helm-install">安装</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/helm-deploy">部署</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/helm-upgrade">升级</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/helm-tools">所需工具</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">部署</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/deploy-aws">Amazon Web Services (Aws)</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/deploy-kubernetes">Kubernetes</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/deploy-bare-metal">裸机</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/deploy-bare-metal-multi-cluster">裸机多集群部署</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/deploy-docker">Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/deploy-monitoring">Monitor</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">系统管理</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-zk-bk">ZooKeeper 和 BookKeeper</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-geo">跨地域复制</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-pulsar-manager">Pulsar Manager</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-stats">Pulsar 统计数据</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-load-balance">负载均衡</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-proxy">Pulsar 代理</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-upgrade">升级</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-isolation">Pulsar 隔离</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">安全</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-policy-and-supported-versions">安全政策和支持的版本</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-tls-transport">使用TLS进行传输加密</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-tls-authentication">使用TLS进行认证</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-tls-keystore">使用 TLS 配置KeyStore</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-jwt">使用 JWT 认证</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-athenz">使用 Athenz 验证</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-kerberos">使用 Kerberos 进行身份验证</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-oauth2">使用 OAuth 2.0 访问令牌进行身份验证</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-authorization">授权和ACL</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-encryption">端到端加密</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-extending">Extend Authentication and Authorization</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-bouncy-castle">Bouncy Castle Providers</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">性能</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/performance-pulsar-perf">Pulsar Perf 性能测试</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">客户端库</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-java">Java</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-go">Go</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-python">Python</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-cpp">C++</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-node">Node.js
</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-websocket">WebSocket</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-dotnet">C#</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-rest">REST</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Admin API</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-clusters">集群</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-tenants">租户</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-brokers">Brokers</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-namespaces">命名空间</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-permissions">权限管理</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-topics">Topic</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-functions">Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-packages">Package</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">适配器</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/adaptors-kafka">Kafka 客户端封装</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/adaptors-spark">Apache Spark</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/adaptors-storm">Apache Storm</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">参考手册</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-compaction">Topic compaction</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-deduplication">消息去重</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-non-persistent">非持久化消息</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-retention-expiry">消息保留和过期</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-encryption">加密</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-message-queue">消息队列</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-bookkeepermetadata">BookKeeper Ledger 元数据</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">开发</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/develop-tools">模拟工具</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/developing-binary-protocol">Binary protocol</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/develop-load-manager">模块化负载管理器</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/develop-plugin">Plugin</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">参考</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/reference-terminology">术语</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/reference-cli-tools">Pulsar 命令行工具</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/zh-CN/next/reference-configuration">Pulsar configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/reference-metrics">Pulsar Metrics</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/apache-pulsar/zh-CN" target="_blank" rel="noreferrer noopener">Translate</a><h1 id="__docusaurus" class="postHeaderTitle">Pulsar configuration</h1></header><article><div><span><style type="text/css">
  table{
    font-size: 80%;
  }
</style>
<p>您可以通过 Pulsar <a href="/docs/zh-CN/next/getting-started-standalone">安装包</a>下的 <a href="https://github.com/apache/pulsar/tree/master/conf">conf</code></a> 目录中的配置文件来管理 Pulsar 配置。</p>
<ul>
<li><a href="#bookkeeper">BookKeeper</a></li>
<li><a href="#broker">Broker</a></li>
<li><a href="#client">Client</a></li>
<li><a href="#log4j">Log4j</a></li>
<li><a href="#log4j-shell">Log4j shell</a></li>
<li><a href="#standalone">Standalone</a></li>
<li><a href="#websocket">WebSocket</a></li>
<li><a href="#pulsar-proxy">Pulsar 代理</a></li>
<li><a href="#zookeeper">ZooKeeper</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="bookkeeper"></a><a href="#bookkeeper" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>BookKeeper</h2>
<p>BookKeeper 是一个冗余的日志存储系统，Pulsar 用它来持久化存储所有消息。</p>
<table>
<thead>
<tr><th>配置项</th><th>说明</th><th>默认值</th></tr>
</thead>
<tbody>
<tr><td>bookiePort</td><td>bookie 服务器监听的端口。</td><td>3181</td></tr>
<tr><td>allowLoopback</td><td>是否允许 bookie 使用回环接口作为其主要接口（ 即用于建立其身份的接口 ）。 默认情况下，回环接口不允许作为主接口。 使用 loopback 接口作为主接口通常意味着配置错误。 例如，在某些 VPS 设置中，通常不会配置主机名或使主机名解析为 <code>127.0.0.1</code>。 如果情况如此，那么集群中的所有 bookie 都会将其身份设置为 <code>127.0.0.1:3181</code> 并且只有一个能成功加入集群。 对于像这样配置的 VPS，你应该显性地设置监听接口。</td><td>false</td></tr>
<tr><td>listeningInterface</td><td>Bookie 监听的网卡。默认情况下，bookie 会监听所有网卡。</td><td>eth0</td></tr>
<tr><td>advertisedAddress</td><td>配置一个特定的主机名或IP地址，用于将bookie发布给客户端。 默认情况下，bookie 根据 <code>listeningInterface</code> 和 <code>useHostNameAsBookieID</code> 设置公布自己的 IP 地址或主机名。</td><td>N/A</td></tr>
<tr><td>allowMultipleDirsUnderSameDiskPartition</td><td>配置 bookie 以启用/禁用同一文件系统磁盘分区中的多个 ledger/index/journal 目录。</td><td>false</td></tr>
<tr><td>minUsableSizeForIndexFileCreation</td><td>Bookie以只读模式启动并重放日志时，供bookie在索引目录中创建索引文件的最小安全可用大小(以字节为单位)。</td><td>1073741824</td></tr>
<tr><td>journalDirectory</td><td>BookKeeper 输出其预写日志 (WAL) 的目录。</td><td>data/bookkeeper/journal</td></tr>
<tr><td>journalDirectories</td><td>用于BookKeeper输出WAL日志的目录。 有多个目录可用，以<code>,</code> 分隔。 例如： <code>journalDirectories=/tmp/bk-journal1,/tmp/bk-journal2</code>。 如果设置了 <code>journalDirectories</code>，bookies 会跳过 <code>journalDirectory</code> 并使用此设置目录。</td><td>/tmp/bk-journal</td></tr>
<tr><td>ledgerDirectories</td><td>BookKeeper 输出 ledger 快照的目录。 这可以定义多个目录来存储由 <code>,</code> 分隔的快照，例如 <code>ledgerDirectories=/tmp/bk1-data,/tmp/bk2-data</code>。 最理想的情况是，ledger 目录和日志目录都是在不同的设备中，这减少了随机读写和顺序写入之间的争执。 可以用单个磁盘运行，但性能将显著降低。</td><td>data/bookkeeper/ledgers</td></tr>
<tr><td>ledgerManagerType</td><td>用于管理 ledger 如何存储与管理，以及垃圾收集的 ledger 管理器类型。 查看 <a href="http://bookkeeper.apache.org/docs/latest/getting-started/concepts">BookKeeper Internals</a> 获取更多信息。</td><td>hierarchical</td></tr>
<tr><td>zkLedgersRootPath</td><td>用于存储 ledger 元数据的根 ZooKeeper 路径。这个参数被基于 ZooKeeper 的 ledger 管理器作为根 znode 来存储所有 ledger。</td><td>/ledgers</td></tr>
<tr><td>ledgerStorageClass</td><td>Ledger 存储实现类</td><td>org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage</td></tr>
<tr><td>entryLogFilePreallocationEnabled</td><td>启用或禁用条目日志记录器预分配</td><td>true</td></tr>
<tr><td>logSizeLimit</td><td>条目日志记录器的最大文件大小，以字节计。 当旧条目达到文件大小限制时，将创建一个新的条目日志文件。</td><td>2147483648</td></tr>
<tr><td>minorCompactionThreshold</td><td>次级压缩的阈值。 其剩余大小百分比低于此阈值的条目日志文件将在次级压缩中被压缩。 如果设置为零，次级压缩将被禁用。</td><td>0.2</td></tr>
<tr><td>minorCompactionInterval</td><td>运行次级压缩的时间间隔，以秒为单位。 如果设置为小于零，则禁用次级压缩。 注意：应该大于 gcWaitTime。</td><td>3600</td></tr>
<tr><td>majorCompactionThreshold</td><td>首级压缩的阈值。 其剩余大小百分比低于此阈值的条目日志文件将在首级压缩中被压缩。 剩余大小百分比仍高于阈值的条目日志文件永远不会被压缩。 如果设置为零，次级压缩将被禁用。</td><td>0.5</td></tr>
<tr><td>majorCompactionInterval</td><td>运行首级压缩的时间间隔，以秒为单位。 如果设置为小于零，则禁用首级压缩。 注意：应该大于 gcWaitTime。</td><td>86400</td></tr>
<tr><td>readOnlyModeEnabled</td><td>如果<code>readOnlyModeEnabled=true</code>，然后所有的 ledger 磁盘上都写满，bookie 将被转换为只读模式并且只服务于读取请求。 否则 bookie 将被关闭。</td><td>true</td></tr>
<tr><td>forceReadOnlyBookie</td><td>Bookie 是否以只读模式强制启动。</td><td>false</td></tr>
<tr><td>persistBookieStatusEnabled</td><td>在磁盘上持久化 bookie 本地状态。 因此，bookie 可以在重新启动时保持其状态。</td><td>false</td></tr>
<tr><td>compactionMaxOutstandingRequests</td><td>设置压缩过程中无需刷写的最大条目数。 在压缩时，条目被写入条目日志，新的偏移被缓存在内存中。 一旦条目日志被刷写，索引将被新的偏移量更新。 此参数控制在强制刷写之前添加到条目日志的条目数量。 此参数的值越狱高意味着将有更多内存用于偏移量。 每个偏移量由三个 long 型组成。 此参数不应被修改，除非你完全了解其后果。</td><td>100000</td></tr>
<tr><td>compactionRate</td><td>压缩过程中读取条目的频率，以每秒添加数为单位。</td><td>1000</td></tr>
<tr><td>isThrottleByBytes</td><td>以字节或条目为单位进行阈值压缩</td><td>false</td></tr>
<tr><td>compactionRateByEntries</td><td>压缩过程中读取条目的频率，以每秒添加数为单位。</td><td>1000</td></tr>
<tr><td>compactionRateByBytes</td><td>设置压缩读取条目的速率。 单位是 Bytes/s。</td><td>1000000</td></tr>
<tr><td>journalMaxSizeMB</td><td>日记文件的最大文件大小，以兆为单位。当旧文件达到文件大小限制时，将创建新的日志文件。</td><td>2048</td></tr>
<tr><td>journalMaxBackups</td><td>要保留的最大旧日志文件数。 保留一些旧的日志文件将有助于在特殊情况下进行数据恢复。</td><td>5</td></tr>
<tr><td>journalPreAllocSizeMB</td><td>每次在日志中预分配的空间大小。</td><td>16</td></tr>
<tr><td>journalWriteBufferSizeKB</td><td>日志使用的写缓冲区大小。</td><td>64</td></tr>
<tr><td>journalRemoveFromPageCache</td><td>强制写入后，页是否应从页缓存中删除。</td><td>true</td></tr>
<tr><td>journalAdaptiveGroupWrites</td><td>是否将日志的强制写入进行分组，这能优化分组提交获得更高吞吐量。</td><td>true</td></tr>
<tr><td>journalMaxGroupWaitMSec</td><td>实现分组写入日志的最大延迟。</td><td>1</td></tr>
<tr><td>journalAlignmentSize</td><td>所有日志的写入和提交应与给定的大小对齐</td><td>4096</td></tr>
<tr><td>journalBufferedWritesThreshold</td><td>要实现分组的最大写入缓存</td><td>524288</td></tr>
<tr><td>journalFlushWhenQueueEmpty</td><td>是否在日志队列为空时刷写日志</td><td>false</td></tr>
<tr><td>numJournalCallbackThreads</td><td>处理日志回调的线程数</td><td>8</td></tr>
<tr><td>openLedgerRereplicationGracePeriod</td><td>The grace period, in milliseconds, that the replication worker waits before fencing and replicating a ledger fragment that's still being written to upon bookie failure.</td><td>30000</td></tr>
<tr><td>rereplicationEntryBatchSize</td><td>重复制时在 fragment 中保存的最大条目数</td><td>100</td></tr>
<tr><td>autoRecoveryDaemonEnabled</td><td>Bookie 本身是否可以启动自动恢复服务。</td><td>true</td></tr>
<tr><td>lostBookieRecoveryDelay</td><td>在开始自动恢复丢失的 bookie 之前等待多长时间（以秒为单位）。</td><td>0</td></tr>
<tr><td>gcWaitTime</td><td>触发下一次垃圾收集的时间间隔（毫秒）。 由于垃圾收集工作在后台进行，过于频繁的垃圾收集工作将降低性能。 如果磁盘容量足够，最好用更大的 gc 时间间隔。</td><td>900000</td></tr>
<tr><td>gcOverreplicatedLedgerWaitTime</td><td>触发下一次垃圾收集器收集过度复制的 ledger 的时间间隔（毫秒）。 这种情况不应经常发生，因为我们从 zookeeper 的 bookie 上读取所有 ledger 的元数据。</td><td>86400000</td></tr>
<tr><td>flushInterval</td><td>刷新 ledger 索引页到磁盘的间隔，以毫秒计。 刷新索引文件会引入大量随机磁盘 I/O。 如果在不同的设备上将日志目录和 ledger 目录分开，刷写就不会影响性能。 但是，如果在同一设备上放置日志目录和 ledger 目录，性能会在频繁刷写的情况下大幅下降。 你可以考虑增加刷写间隔来获得更好的性能，但你需要在 bookie 服务器失败重启后花更多时间。</td><td>60000</td></tr>
<tr><td>bookieDeathWatchInterval</td><td>查看 bookie 是否已死亡的时间间隔，以毫秒为单位</td><td>1000</td></tr>
<tr><td>allowStorageExpansion</td><td>允许扩展 bookie 存储。 新添加的 ledger 和索引目录必须为空。</td><td>false</td></tr>
<tr><td>zkServers</td><td>正在运行 zookeeper 的服务器（一个或多个）列表。服务器列表可以为逗号分隔的值，如 zkServers=zk1:2181,zk2:2181,zk3:2181。</td><td>localhost:2181</td></tr>
<tr><td>zkTimeout</td><td>ZooKeeper 客户端会话超时时间，以毫秒为单位。Bookie 服务器如果收到 SESSION_EXPIRED，将退出，因为它从 ZooKeeper 进行分区超过了会话超时时间。JVM 垃圾收集和磁盘 I/O 会导致 SESSION_EXPIRED。 增加这个值可以帮助避免这个问题</td><td>30000</td></tr>
<tr><td>zkRetryBackoffStartMs</td><td>Zookeeper 客户端退避重试的开始时间（以毫秒为单位）。</td><td>1000</td></tr>
<tr><td>zkRetryBackoffMaxMs</td><td>Zookeeper 客户端退避重试的最长时间（以毫秒为单位）。</td><td>10000</td></tr>
<tr><td>zkEnableSecurity</td><td>在 ZooKeeper 上写入的每个节点上设置 ACL，允许用户读取和写入存储在 ZooKeeper 上的 BookKeeper 元数据。 为了让ACL正常工作，您需要设置ZooKeeper JAAS认证。 所有 bookies 和客户端需要共享相同的用户，通常使用 Kerberos 身份验证。 请参见 ZooKeeper 文档。</td><td>false</td></tr>
<tr><td>httpServerEnabled</td><td>启用/禁用启动管理HTTP服务器。</td><td>false</td></tr>
<tr><td>httpServerPort</td><td>HTTP 服务器监听的端口。 默认情况下，该值为 <code>8080</code>。 如果你想让它与 Prometheus 统计数据提供者保持一致，你可以将它设置为 <code>8000</code>。</td><td>8080</td></tr>
<tr><td>httpServerClass</td><td>Http服务器实现类。</td><td>org.apache.bookkeeper.http.vertx.VertxHttpServer</td></tr>
<tr><td>serverTcpNoDelay</td><td>此设置用于启用/禁用 Nagle 的算法，该算法能通过减少通过网络发送的数据包数量来提高 TCP/IP 网络效率。 如果你正在发送许多小消息，这样在单个 IP 数据包中就可以放入不止一个消息，设置 server.tcpnodelay 为 false 来启用 Nagle 算法可以提供更好的性能。</td><td>true</td></tr>
<tr><td>serverSockKeepalive</td><td>此设置用于在面向连接的套接字上发送 keep-alive 消息。</td><td>true</td></tr>
<tr><td>serverTcpLinger</td><td>关闭时TCP延迟超时。 当启用时，关闭或关机将不会返回，直到TCP的所有排队消息都被成功发送或达到徘徊超时。 否则，调用将立即返回，关闭是在后台完成的。</td><td>0</td></tr>
<tr><td>byteBufAllocatorSizeMax</td><td>ByteBuf分配器能够接受的最大buf的大小</td><td>1048576</td></tr>
<tr><td>nettyMaxFrameSizeBytes</td><td>以byte为单位的最大netty frame 大小。任何收到的大于此值的消息都将被拒绝。</td><td>5253120</td></tr>
<tr><td>openFileLimit</td><td>在 bookie 服务器上可以打开 ledger 索引文件的最大数量。如果 ledger 索引文件数量达到这个限制，bookie 服务器会开始将一些 ledger 从内存交换到磁盘。 过于频繁的交换会影响性能。 你可以根据你的要求调整这个数字以获得性能提升。</td><td>0</td></tr>
<tr><td>pageSize</td><td>Ledger 缓存中索引页的大小，是以字节为单位。一个大的索引页可以改善将页写入磁盘的性能。当你有少量有 ledger 并且这些 ledger 有着相似数量的条目时，会很高效。 如果你有大量的 ledger，而每个 ledger 都有较少的条目，较小的索引页面将会提高内存使用率。</td><td>8192</td></tr>
<tr><td>pageLimit</td><td>在 ledger 缓存中提供多少索引页面。如果索引页面数量达到此限制，bookie 服务器会开始将一些 ledger 从内存交换到磁盘。 当你发现交换变得更频繁时，可以增加这个值。 但请确认 pageLimit*page 的大小不应超过 JVM 最大内存限制，否则你将会得到 OutOfMemoryException。 一般来说，增加pageLimit，使用较小的索引页会在条目较少的大账本中获得更好的性能。 如果pageLimit为-1，bookie服务将根据1/3的JVM内存来计算索引页的数量限制。</td><td>0</td></tr>
<tr><td>readOnlyModeEnabled</td><td>如果所有已配置的 ledger 目录已满，则只支持客户的读取请求。 如果 “readOnlyModeEnabled=true” 那么当所有的 ledger 磁盘满时，bookie 会被转换为只读模式并只处理读请求。 否则 bookie 将被关闭。 默认情况下，这会被禁用。</td><td>true</td></tr>
<tr><td>diskUsageThreshold</td><td>对于每个 ledger 目录，可使用的最大磁盘空间。 默认值为 0.95f。 比如，最多只能使用 95% 的磁盘，此后不会将任何内容写入该分区。 如果所有的ledger目录分区都满了，那么如果设置了'readOnlyModeEnabled=true'，bookie将转为只读模式，否则它将关闭。 有效值应在 0 和 1 之间(不包含端点)。</td><td>0.95</td></tr>
<tr><td>diskCheckInterval</td><td>磁盘检查间隔，以毫秒为单位，检查 ledger 目录使用情况的时间间隔。</td><td>10000</td></tr>
<tr><td>auditorPeriodicCheckInterval</td><td>审查者对集群内所有 ledger 进行核对的时间间隔。 默认情况下，每周运行一次。 间隔以秒为单位。 要完全禁用定期检查，请将此设置为 0。 请注意，定期检查会给集群带来额外的负荷，因此每天的运行次数不应超过一次。</td><td>604800</td></tr>
<tr><td>sortedLedgerStorageEnabled</td><td>Whether sorted-ledger storage is enabled.</td><td>true</td></tr>
<tr><td>auditorPeriodicBookieCheckInterval</td><td>审查者 bookie 检查的时间间隔。 审查者 bookie 检查，检查 ledger 的元数据来查看哪些 bookie 应该包含各个 ledger 的条目。 如果本应包含条目的 bookie 不可用，包含该条目的 ledger 会被标记去做恢复。 设置为 0 会禁用定期检查。 当 bookie 失效时，bookie 检查仍然会进行。 间隔以秒为单位。</td><td>86400</td></tr>
<tr><td>numAddWorkerThreads</td><td>需要处理写请求的线程数。如果为零，写将由netty线程直接处理。</td><td>0</td></tr>
<tr><td>numReadWorkerThreads</td><td>需要处理读取请求的线程数量。如果为零，读取将由netty线程直接处理。</td><td>8</td></tr>
<tr><td>numHighPriorityWorkerThreads</td><td>用于高优先级请求的线程数量（例如恢复读和添加，以及fencing）。</td><td>8</td></tr>
<tr><td>maxPendingReadRequestsPerThread</td><td>如果启用了读 worker 线程，限制待处理请求的数量，以避免执行器队列无止境增长。</td><td>2500</td></tr>
<tr><td>maxPendingAddRequestsPerThread</td><td>待处理请求的限制的线程数量。用于避免在启用添加工作线程时，执行者队列无限期增长。</td><td>10000</td></tr>
<tr><td>isForceGCAllowWhenNoSpace</td><td>当磁盘已满或快满时，是否允许强制压缩。 强制GC可以找回一些空间，但也可能更快地填满磁盘空间。 这是因为新的日志文件是在GC之前创建的，而旧的垃圾日志文件在GC之后被删除。</td><td>false</td></tr>
<tr><td>verifyMetadataOnGC</td><td>设置了true，bookie就会在GC之前去复查<code>readMetadata</code></td><td>false</td></tr>
<tr><td>flushEntrylogBytes</td><td>条目日志刷新时间间隔，以字节为单位。以较小的块来刷新，但是更频繁地刷新可以减少磁盘I/O的峰值。太频繁的刷新也可能对性能产生负面影响。</td><td>268435456</td></tr>
<tr><td>readBufferSizeBytes</td><td>用作 BufferedReadChannel 容量的字节数量。</td><td>4096</td></tr>
<tr><td>writeBufferSizeBytes</td><td>用作写缓存容量的字节数</td><td>65536</td></tr>
<tr><td>useHostNameAsBookieID</td><td>Bookie是否应该使用其主机名来注册协调服务（例如：zookeeper服务）。当false时，bookie将使用其ip地址进行注册。</td><td>false</td></tr>
<tr><td>bookieId</td><td>如果你想定制一个bookie的ID，或者为bookie使用一个动态网络地址, 你可以设置 <code>bookieId</code>的值。</td></tr>
</tbody>
</table>
<p>Bookie 用<code>bookieId</code> 而不是<code>BookieSocketAddress</code>广播自已(<code>hostname:port</code> or <code>IP:port</code>). 如果你设置了<code>bookieId</code>，<code>useHostNameAsBookieID</code> 就不会起作用。</p>
<p>The <code>bookieId</code> 是一个非空字符串，可以包含ASCII数字和字母（[a-zA-Z9-0]）、冒号、破折号和圆点。 关于<code>bookieId</code>的更多信息，请查看<a href="http://bookkeeper.apache.org/bps/BP-41-bookieid/">这里</a>。 | N/A                                                              |
| allowEphemeralPorts                       | 是否允许bookie 使用一个临时的端口（端口0）作为其服务器端口。 默认情况下，不允许使用短暂的端临时 使用一个临时的端口作为服务端口通常会显示配置错误。 然而，在单元测试中，使用一个临时的端口配置将解决端口冲突问题，并可以进行并行的测试。                                                                                                                                                                                                                         | false                                                            |
| enableLocalTransport                      | 是否允许bookie监听本地JVM上运行的BookKeeper客户端。                                                                                                                                                                                                                                                                                                               | false                                                            |
| disableServerSocketBind                   | 是否允许bookie禁用在网络接口的绑定。这个配置bookie将只对本地JVM上执行的BookKeeper客户端有效。                                                                                                                                                                                                                                                                                       | false                                                            |
| skipListArenaChunkSize                    | 用来给<code>org.apache.bookkeeper.bookie.SkipListArena</code>分配的块大小。                                                                                                                                                                                                                                                                                            | 4194304                                                          |
| skipListArenaMaxAllocSize                 | 我们用来设置给skiplist arena的最大大小。此设置的大小应该大于由虚拟机直接分配的大小，以避免碎片化。                                                                                                                                                                                                                                                                                          | 131072                                                           |
| bookieAuthProviderFactoryClass            | Bookie进行认证的工厂类名称。如果这个是空的，那么就没有认证。                                                                                                                                                                                                                                                                                                                 | null                                                             |
| statsProviderClass                        |                                                                                                                                                                                                                                                                                                                                                   | org.apache.bookkeeper.stats.prometheus.PrometheusMetricsProvider |
| prometheusStatsHttpPort                   |                                                                                                                                                                                                                                                                                                                                                   | 8000                                                             |
| dbStorage_writeCacheMaxSizeMb             | 写入缓存的大小。 所使用的内存是 JVM 直接内存。 写入缓存用于在冲入条目日志之前对条目进行缓冲。 为了获得良好的性能，它应该足够大，以便在冲刷间隔内容纳足够多的条目。                                                                                                                                                                                                                                                             | 25% 的直接内存                                                        |
| dbStorage_readAheadCacheMaxSizeMb         | 读取缓存的大小。 所使用的内存是 JVM 直接内存。 每当发生缓存缺失时，这个读缓存就会被预先填满，进行读预处理。 默认情况下，它被分配到可用直接内存的25%。                                                                                                                                                                                                                                                                  | N/A                                                              |
| dbStorage_readAheadCacheBatchSize         | 当读缓存 miss 发生后预装填的条目数量                                                                                                                                                                                                                                                                                                                             | 1000                                                             |
| dbStorage_rocksDB_blockCacheSize        | RocksDB 的 block-cache 大小。 为了获得最佳性能，这个缓存应该大到足以容纳索引数据库的绝大数部分，在某些情况下可以达到~2GB。 默认情况下，它使用10%的直接内存。                                                                                                                                                                                                                                                     | N/A                                                              |
| dbStorage_rocksDB_writeBufferSizeMB     |                                                                                                                                                                                                                                                                                                                                                   | 64                                                               |
| dbStorage_rocksDB_sstSizeInMB           |                                                                                                                                                                                                                                                                                                                                                   | 64                                                               |
| dbStorage_rocksDB_blockSize             |                                                                                                                                                                                                                                                                                                                                                   | 65536                                                            |
| dbStorage_rocksDB_bloomFilterBitsPerKey |                                                                                                                                                                                                                                                                                                                                                   | 10                                                               |
| dbStorage_rocksDB_numLevels             |                                                                                                                                                                                                                                                                                                                                                   | -1                                                               |
| dbStorage_rocksDB_numFilesInLevel0      |                                                                                                                                                                                                                                                                                                                                                   | 4                                                                |
| dbStorage_rocksDB_maxSizeInLevel1MB     |                                                                                                                                                                                                                                                                                                                                                   | 256                                                              |</p>
<h2><a class="anchor" aria-hidden="true" id="broker"></a><a href="#broker" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Broker</h2>
<p>Pulsar broker 负责处理从生产者发出消息、向消费者派发消息、在集群间复制数据等。</p>
<p>|名称|描述|默认值| |---|---|---| |advertisedListeners|为 broker 指定多个广播监听者。</p>
<p>格式为 <code>&lt;listener_name&gt;:pulsar://&lt;host&gt;:&lt;port&gt;</code>.</p>
<p>如果有多个监听，请用逗号将其分开。</p>
<p><strong>Note</strong>: 不要将此配置与如下配置同时使用 <code>advertisedAddress</code> and <code>brokerServicePort</code>。如果broker 使用的此配置的值为空 <code>advertisedAddress</code> and <code>brokerServicePort</code>|/| internalListenerName|为 broker 指定内部监听器名称</p>
<p><strong>Note</strong>: the listener name must be contained in <code>advertisedListeners</code>.</p>
<p>如果这个配置的值为空，broker 会使用第一个监听作为内部的监听。 |authenticateOriginalAuthData|如果这个标志被设置了 <code>true</code>，broker 对原始Auth数据进行认证；否则，它只是接受原始Principal并对其进行授权（如果需要）。 |false| |enablePersistentTopics| 是否在broker启用持久性主题|true| |enableNonPersistentTopics| 是否在broker上启用了非持久性的主题 |true| |functionsWorkerEnabled| 是否在broker启用了Pulsar Functions工作者服务|false| |exposePublisherStats|是否启用主题级别的度量。 |statsUpdateFrequencyInSecs||60||。 |statsUpdateInitialDelayInSecs||60||。 |metadataStoreUrl| Metadata store quorum connection string || |metadataStoreCacheExpirySeconds|元数据存储缓存过期时间（秒）|300|。 |配置MetadataStoreUrl|配置存储连接字符串（用逗号分隔的列表）|| |brokerServicePort|broker的数据端口|6650| |brokerServicePortTlsbroker的TLS数据端口 |6651| |webServicePort|用于服务器HTTP请求的端口|8080| |webServicePortTls| 服务器HTTPS请求使用的端口 |8443| |webSocketServiceEnabled| 启用broker的WebSocket API服务|false| |webSocketNumIoThreads|在WebSocket代理中使用的Pulsar客户端的IO线程数量。 |webSocketConnectionsPerBroker|WebSocket proxy.|Runtime.getRuntime().availableProcessors()中使用的Pulsar Client中每个Broker的连接数。 |webSocketSessionIdleTimeoutMillis|空闲的WebSocket会话超时的时间（毫秒）。|300000| |webSocketMaxTextFrameSize|在WebSocket代理中解析文本信息时的最大尺寸.1048576| |exposeTopicLevelMetricsInPrometheus|是否启用主题级指标。 |exposeConsumerLevelMetricsInPrometheus|是否启用消费者级别指标。 |jvmGCMetricsLoggerClassName|可插拔的JVM GC指标记录器的Classname，可以记录GC特定指标。 |bindAddress|服务所绑定的主机名或IP地址，默认为0.0.0.0。 |0.0.0.0| |bindAddresses| 服务所绑定的其他主机名或IP地址。 XPath: /p[4]/text[13] 。 <code>listener_name:scheme://host:port,...</code>. || |advertisedAddress| 服务向外界宣传的主机名或IP地址。如果不设置，则其值为 <code>InetAddress.getLocalHost().getHostName()</code> 作为使用 || |clusterName|该broker所属集群的名称|| |maxTenants|每个Pulsar集群中可创建的最大租户数。 当租户的数量达到阈值时， broker会拒绝创建新租户的请求。 The default value 0 disables the check. |0| |设置broker中重复数据删除的默认值。 If enabled, the broker will reject messages that were already stored in the topic. This setting can be overridden on a per-namespace basis. |false| |为了删除重复数据而存储信息的最大生产者数量。 |10000| |brokerDeduplicationEntriesInterval| 重复信息快照的条数。 A larger interval will lead to fewer snapshots being taken, though this would also lengthen the topic recovery time (the time required for entries published after the snapshot to be replayed). |1000| |brokerDeduplicationSnapshotIntervalSeconds| 重复数据删除信息快照的时间段。 它同时与以下内容一起运行 <code>brokerDeduplicationEntriesInterval</code>. |120| |brokerDeduplicationProducerInactivityTimeoutMinutes|在broker将丢弃与断开连接的生产者有关的重复数据删除信息后，不活跃的时间（分钟）。 |360| |brokerDeduplicationSnapshotFrequencyInSeconds|线程池计划多久检查一次是否需要生成快照。 配置值是 <code>0</code> 表示它被禁用。 |120| |dispatchThrottlingRateInMsg| 调节流量-一个broker的消息上限（每秒）。 0意味着控制流量线程被禁用。 |0| |dispatchThrottlingRateInByte|为分配的broker的字节数（每秒）。 0意味着控制流量线程被禁用。 |0| |dispatchThrottlingRateInByte|为分配的broker的字节数（每秒）。 0意味着控制流量线程被禁用。 |0| |dailchThrottlingRatePerTopicInByte| 为每个主题发布字节限制(每秒)。 0意味着控制流量线程被禁用。 |0| |pailchThrottlingOnBatchMessageEnabled|应用发送率限制批量消息，而不是批量消息中的个别消息。 (默认已禁用) | false| |dispatchThrottlingRateRelativeToPublishRate|启用相对于发布速率的调度速率限制。 | false | | paichThrotlingRatePeruscriptionInMsg| 为订阅发送消息的节点限制。 0意味着控制流量线程被禁用。 |0| |dailchThrottlingRatePerTopicInByte| 为每个主题发布字节限制(每秒)。 0 表示已禁用调度线程限制。|0| |dispatchThrottlingRatePererplicatorInMsg| 每次调度的默认消息在复制中每次调度线程限制。 配置值是 <code>0</code> 表示禁用重复消息调度线程| 0 | | 调度ThrottlingRatePerReplicatorInByte| 每秒调度线程的默认字节数限制到每个重复测距器。 配置值是 <code>0</code> 表示禁用复制消息字节的派发阈值| 0 | |zooKeeperSessionTimeoutMillis| Zookeeper 会话过期时间（以毫秒计） |30000| |brokerShutdownTimeoutMs| 等待 broker 优雅地关闭的时间 过了这段时间后，这个过程将被杀死|60000| |skipBrokerShutdownOnOOM|当broker处理Out of memory错误时，跳过broker关闭的标志。 |false| |backlogQuotaCheckEnabled|启用积压配置检查。 当达到设置的阈值时，强制对主题采取行动|true| |backlogQuotaCheckIntervalInSeconds| 为topic多久检查一次达到设置的值 |60| |backlogQuotaDefaultLimitBytes| 每个主题默认的积压限制的大小。 Being less than 0 means no limitation. By default, it is -1. | -1 | |backlogQuotaDefaultRetentionPolicy|The defaulted backlog quota retention policy. 按默认值是 <code>producer_request_hold</code>.</p>
<ul>
<li><p>'producer_request_hold'保持生产者的发送请求，直到资源可用（或保持时间过长）的策略。</p></li>
<li><p>' producer_exception' 向生产者抛出<code>javax.jms.ResourceAllocationException</code>的策略。</p></li>
<li><p>'consumer_backlog_eviction' 驱逐最慢的消费者积压的最旧信息的策略|producer_request_hold| |allowAutoTopicCreation| 如果有新的生产者或消费者连接，则启用主题自动创建|true| |allowAutoTopicCreationType| 允许自动创建的主题类型。（分区/非分区） |非分区| |allowAutoSubscriptionCreation| 如果有新的消费者连接，允许自动创建订阅 |true| |defaultNumPartitions|允许自动创建的分区主题的数量，如果
<code>allowAutoTopicCreationType</code> 是已经分区的|1| |brokerDeleteInactiveTopicsEnabled| 启用删除非活动主题。 If topics are not consumed for some while, these inactive topics might be cleaned up. Deleting inactive topics is enabled by default. The default period is 1 minute. |true| |brokerDeleteInactiveTopicsFrequencySeconds|检查不活动主题的频率|60| |brokerDeleteInactiveTopicsMode |设置删除不活动主题的模式。</p></li>
<li><p><code>delete_when_no_subscriptions</code>: 删除没有订阅或活动生产者的主题。</p>
<ul>
<li><p><code>delete_when_subscriptions_caught_up</code>：删除订阅没有积压、没有活跃生产者或消费者的主题。| <code>delete_when_no_subscriptions</code> | | brokerDeleteInactiveTopicsMaxInactiviveDurationSeconds | 设置非活动主题的最长持续时间。如果未指定，请指定： <code>brokerDeleteInactiveTopicsFrequencySeconds</code> 参数被采纳。 | N/A | | 强制删除Tenantallowed| 允许您强行删除租户。 |false| |forceDeleteNamespaceAllowed|允许强制删除命名空间。 |false| |messageExpiryCheckIntervalInMinutes| 主动检查和清除过期消息的频率。 |5| |brokerServiceCompactionMonitorIntervalInSecond| 检查之间的间隔，以确定具有compaction policy的主题是否需要紧凑。 |60| brokerServiceCompactionThresholdInBytes|如果预估积压大小大于此阈值，则触发压缩。</p>
<p>将此阈值设置为0意味着禁用压缩检查。|N/A|delayedDeliveryEnabled|是否启用消息的延迟。 如果禁用，消息将被立即发送，并且没有跟踪开销。|true||delayedDeliveryTickTimeMillis|控制延迟发送时重试的时间，这将影响投递时间与预定时间相比的准确性。 默认情况下，它是 1 秒.|1000| |ActiveConsumerFailoverDelayTimeMillis| 当活动消费者改变时，延时多长时间才能延迟光标和发送消息。 |1000| |clientLibraryVersionCheckEnabled|启用允许的最小客户端库版本检查|false| |clientLibraryVersionCheckAllowUnversioned|允许没有版本信息的客户端库|true| ||statusFilePath|在响应服务发现健康检查时用于确定代理的rotation状态的文件路径| |preferLaterVersions|如果为真。(并且正在使用ModularLoadManagerImpl），负载管理器将尝试只使用运行最新软件版本的broker（以尽量减少对bundle的影响）|false| |maxNumPartitionsPerPartitionedTopic|每个分区主题的最大分区数 使用0或负数来禁用检查。 | maxSubscriptionsPerTopic | 一个主题允许订阅的最大订阅数。 一旦达到这个限制， broker就会拒绝新的订阅，直到订阅的数量减少。 当值设置为 0时，发布限制将被禁用。 | 0 | | maxProducersPerTopic | 允许生产者连接到主题的最大数量。 Once this limit reaches, the broker rejects new producers until the number of connected producers decreases. 当值设置为 0时，发布限制将被禁用。 | 0 | | maxConsumersPerTopic | 允许消费者连接到主题的最大数量。 Once this limit reaches, the broker rejects new consumers until the number of connected consumers decreases. 当值设置为 0时，发布限制将被禁用。 | 0 | | maxConsumersPerTopic | 允许连接到一个订阅的最大消费者数量。 Once this limit reaches, the broker rejects new consumers until the number of connected consumers decreases. 当值设置为 0时，发布限制将被禁用。 | 0 | |tlsCertificateFilePath| TLS证书文件的路径 || |tlsKeyFilePath| TLS私钥文件的路径 || |tlsTrustCertsFilePath| 受信任的TLS证书文件的路径。 此证书用于验证通过连接客户端提供的任何证书由证书机构签名。 If this verification fails, then the certs are untrusted and the connections are dropped. || |tlsAllowInsecureConnection|接受来自客户端的不被信任的TLS证书。 如果被设置为 <code>true</code>如果设置为 true， 使用'tlsTrustCertCertsFilePath'证书无法被验证的客户端可以连接到服务器， 但该证书不用于客户端身份验证。 |false| |tlsProtocol|指定broker在TLS Handake期间将使用的 tls 协议。 Multiple values can be specified, separated by commas. Example:- <code>TLSv1.3</code>, <code>TLSv1.2</code> || |tlsCiphers|指定经纪人在TLS握手过程中要使用的tls密码。可以指定多个值，用逗号分隔。例如：- <code>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>|| |tlsEnabledWithKeyStore|在broker中启用带有KeyStore类型配置的TLS |false| |tlsProvider| 密钥存储类型的TLS提供方 || |tlsKeyStoreType| 在broker中配置LS KeyStore类型。borker中的LS密钥存储类型配置：JKS, PKCS12 |JKS| |tlsKeyStore|broker中的TLS KeyStore路径 || |tlsKeyStorePassword| broker的TLS KeyStore密码 || |brokerClientTlsEnabledWithKeyStore| 内部客户端是否使用KeyStore类型来验证Pulsa broker|false| |brokerClientSslProvider| 提供内部客户端使用的TLS，用于与其他Pulsar broker进行身份验证。 |brokerClientTlsTrustStoreType|内部客户端的TLS信任存储类型配置。JKS，PKCS12，由内部客户与Pulsar broker进行认证。 |brokerClientTlsTrustStore| 内部客户端的TLS信任存储路径，用于内部客户端与Pulsar broker进行身份验证。 |brokerClientTlsTrustStorePassword| 内部客户的TLS信任存储密码，用于内部客户与Pulsar broker的身份验证。 |brokerClientTlsCiphers| 指定内部客户端在TLS握手期间将使用的tls密码。 (逗号分隔的密码列表），例如：[TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256]||。 |brokerClientTlsProtocols|指定broker在TLS握手期间将使用的TLS协议。 (逗号分隔的协议名称列表)。 例如： <code>TLSv1.3</code>, <code>TLSv1.2</code> || | metadataStoreBatchingEnabled | 启用元数据操作批处理。 | true | | metadataStoreBatchingMaxDelayMillis | 对批处理组施加最大延迟。 | 5 | | metadataStoreBatchingMaxOperations | 包含在单一批操作的最大数量。 | 1000 | | metadataStoreBatchingMaxSizeKb | 批处理的最大尺寸。 | 128 | | ttlDurationDefaultInsecond|如果TTL未按照命名空间策略配置，命名空间的默认实时时间 (TTL)。 当值设置为 <code>0</code>, TTL 被禁用。默认情况下，TTL 被禁用|0| |tokenSettingPrefix| 配置与令牌相关设置的前缀，例如： <code>tokenSecretKey</code>, <code>tokenPublicKey</code>, <code>tokenAuthClaim</code>, <code>tokenPublicAlg</code>, <code>tokenAudienceClaim</code>, and <code>tokenAudience</code>|| |tokenPublicKey| 配置用于验证认证令牌的公钥。该密钥可以这样指定： <code>tokenSecretKey=data:;base64,xxxxxxxxx</code> or <code>tokenSecretKey=file:///my/secret.key</code>。注意：密钥文件必须是 DER编码。 | |tokenPublicKey| 配置用于验证认证令牌的公钥。该密钥可以指定如下所示： <code>tokenPublicKey=data:;base64,xxxxxxxxx</code> or <code>tokenPublicKey=file:///my/secret.key</code>. 注意：密钥文件必须是 DER-encoded.|| |tokenPublicAlg| 配置用于验证认证令牌的算法。 这可以是Java JWT 支持的任意一种非对称算法 (<a href="https://github.com/jwtk/jjwt#signature-algorithms-keys">https://github.com/jwtk/jjwt#signature-algorithms-keys</a>) |RS256| |tokenAuthClaim| Specify which of the token's claims will be used as the authentication &quot;principal&quot; or &quot;role&quot;. 如果这里留空，则默认的&quot;sub&quot; claim 会被使用 || |tokenAudienceClaim| 令牌受众的 &quot;claim&quot; 名称，比如&quot;aud&quot;会用于从令牌获取受众。 If not set, audience will not be verified. || |tokenAudience| 该 broker 的令牌受众。 The field <code>tokenAudienceClaim</code> 需要包含此值（若令牌可用）。 || |maxUnackedMessagesPerConsumer|允许共享订阅中的消费者接收的未确认信息的最大数量。 Broker will stop sending messages to consumer once, this limit reaches until consumer starts acknowledging messages back. 使用0，就是禁用未确认消息限制检查，消费者可以不受任何限制地接收消息。 |maxUnackedMessagesPerSubscription|每个共享订阅允许的未确认信息的最大数量。 Broker will stop dispatching messages to all consumers of the subscription once this limit reaches until consumer starts acknowledging messages back and unack count reaches to limit/2. 使用 0 值，禁用 unackedMessage-limit 检查且调度器可以不受任何限制地发送消息 |200000| |subscriptionRedeliveryTrackerEnabled| 启用订阅消息重送跟踪 |true| subscriptionExpirationTimeMinutes | 删除上次消费后非活动订阅的时间。</p>
<p>Setting this configuration to a value <strong>greater than 0</strong> 自动删除不活跃的订阅。<br>
将此配置设为 <strong>0</strong> 不会自动删除不活跃的订阅。</p>
<p>由于该配置对所有主题生效，如果有哪怕一个主题的订阅不应该被自动删除，你都需要将其设置为0。<br>
取而代之的是，你可以为每个人设置一个订阅的到期时间。 <strong>命名空间</strong> 使用 <a href="https://pulsar.apache.org/tools/pulsar-admin/2.6.0-SNAPSHOT/#-em-set-subscription-expiration-time-em-"><code>pulsar-admin namespaces set-subscription-expiration-time options</code> command</a>. | 0 | |maxConcurrentLookupRequest| 最大的并发查询请求数， broker允许节制大量的传入查询流量 |50000| |maxConcurrentTopicLoadRequest| 最大并发主题加载请求数，代理允许控制zk-operations的数量 |5000| |authenticationEnabled|启用认证|false| |authenticationProviders| 认证提供者名称列表，是以逗号分隔的类名列表。 |认证更新检查时间|检查过期认证凭证的时间间隔|60| |authorizationEnabled| 强制授权|false| |superUserRoles|被视为 &quot;超级用户 &quot;的角色名称，这意味着他们将能够进行所有的管理操作，并从所有主题发布/消费|| |brokerClientAuthenticationPlugin| broker本身的认证设置。 Used when the broker connects to other brokers, either in same or other clusters || |brokerClientAuthenticationParameters||| |athenzDomainNames| Supported Athenz provider domain names(comma separated) for authentication || |exposePreciseBacklogInPrometheus| Enable expose the precise backlog stats, set false to use published counter and consumed counter to calculate, this would be more efficient but may be inaccurate. |false| |schemaRegistryStorageClassName|该broker使用的模式存储实现。|org.apache.pulsar.broker.service.schema.BookkeeperSchemaStorageFactory| |是否启用模式验证，当启用模式验证时，如果没有模式的生产者试图向有模式的主题生产消息，该生产者将被拒绝并断开连接。 |允许自动更新模式吗|允许在broker层面自动更新模式。 |schemaCompatibilityStrategy|broker级别的模式兼容性策略，见 <a href="/docs/zh-CN/next/schema-evolution-compatibility#schema-compatibility-check-strategy">here</a> for available values.|FULL| |systemTopicSchemaCompatibilityStrategy| The schema compatibility strategy is used for system topics, see <a href="/docs/zh-CN/next/schema-evolution-compatibility#schema-compatibility-check-strategy">here</a> 为可用值。 | topicFencingTimeoutSeconds | 如果一个话题在一定时间内（以秒为单位）没有被围起来，它就会被强行关闭。 如果设置为 0 或负数，则围栏主题不会关闭。 | 0 | |offloadersDirectory|所有卸载器实现的目录，|./offloaders|。 |bookkeeperMetadataServiceUri|元数据服务URI，bookkeeper用于加载相应的元数据驱动并解析其元数据服务位置。 这个值的获取可以通过 <code>bookkeeper shell whatisinstanceid</code> 命令（在 BookKeeper 集群中）。 例如： <a href="zk+hierarchical://localhost:2181/ledgers">zk+hierarchical://localhost:2181/ledgers</a>。 元数据服务URI列表也可以是分号分隔的值，如下所示。<a href="zk+hierarchical://zk1:2181">zk+hierarchical://zk1:2181</a>;zk2:2181;zk3:2181/ledgers || |bookkeeperClientAuthenticationPlugin| 连接bookies时使用的认证插件 || |bookkeeperClientAuthenticationParametersName| BookKeeper auth插件实施的具体参数名称和值|| |bookkeeperClientAuthenticationParameters|||| |bookkeeperClientNumWorkerThreads|| BookKeeper客户端工作线程的数量。 默认为Runtime.getRuntime().availableProcessors() || |bookkeeperClientTimeoutInSeconds|BK添加/读取操作的超时|30| |bookkeeperClientSpeculativeReadTimeoutInMillis|如果读取请求在一定时间内没有完成，就会启动推测性读取 使用0值，就是禁用推测性读取|0| |bookkeeperNumberOfChannelsPerBookie|每个bookie的通道数量 |16| |bookkeeperClientHealthCheckEnabled| 启用bookie健康检查。 Bookies that have more than the configured number of failure within the interval will be quarantined for some time. During this period, new ledgers won’t be created on these bookies |true| |bookkeeperClientHealthCheckIntervalSeconds||60| |bookkeeperClientHealthCheckErrorThresholdPerInterval||5| |bookkeeperClientHealthCheckQuarantineTimeInSeconds ||1800| |bookkeeperClientRackawarePolicyEnabled| Enable rack-aware bookie selection policy. BK will chose bookies from different racks when forming a new bookie ensemble |true| |bookkeeperClientRegionawarePolicyEnabled| Enable region-aware bookie selection policy. BK will chose bookies from different regions and racks when forming a new bookie ensemble. 如果启用，bookkeeperClientRackawarePolicyEnabled的值将被忽略|false| |bookkeeperClientMinNumRacksPerWriteQuorum|每个写入法定数的最小机架数。 BK rack-aware bookie selection policy will try to get bookies from at least 'bookkeeperClientMinNumRacksPerWriteQuorum' racks for a write quorum. |2| |bookkeeperClientEnforceMinNumRacksPerWriteQuorum|执行机架感知的bookies选择策略，从'bookkeeperClientMinNumRacksPerWriteQuorum'机架中挑选bookies进行写入Quorum。 If BK can't find bookie then it would throw BKNotEnoughBookiesException instead of picking random one. |false| |bookkeeperClientReorderReadSequenceEnabled| 启用/禁用在读取条目时重新安排读取顺序。 |false| |bookkeeperClientIsolationGroups| Enable bookie isolation by specifying a list of bookie groups to choose from. Any bookie outside the specified groups will not be used by the broker || |bookkeeperClientSecondaryIsolationGroups| Enable bookie secondary-isolation group if bookkeeperClientIsolationGroups doesn't have enough bookie available. || |bookkeeperClientMinAvailableBookiesInIsolationGroups| Minimum bookies that should be available as part of bookkeeperClientIsolationGroups else broker will include bookkeeperClientSecondaryIsolationGroups bookies in isolated list. || |bookkeeperClientGetBookieInfoIntervalSeconds| Set the interval to periodically check bookie info |86400| |bookkeeperClientGetBookieInfoRetryIntervalSeconds| Set the interval to retry a failed bookie info lookup |60| |bookkeeperEnableStickyReads | Enable/disable having read operations for a ledger to be sticky to a single bookie. If this flag is enabled, the client will use one single bookie (by preference) to read all entries for a ledger. | true | |managedLedgerDefaultEnsembleSize| Number of bookies to use when creating a ledger |2| |managedLedgerDefaultWriteQuorum| Number of copies to store for each message |2| |managedLedgerDefaultAckQuorum| Number of guaranteed copies (acks to wait before write is complete) |2| |managedLedgerCacheSizeMB| Amount of memory to use for caching data payload in managed ledger. This memory is allocated from JVM direct memory and it’s shared across all the topics running in the same broker. By default, uses 1/5th of available direct memory || |managedLedgerCacheCopyEntries| Whether we should make a copy of the entry payloads when inserting in cache| false| |managedLedgerCacheEvictionWatermark| Threshold to which bring down the cache level when eviction is triggered |0.9| |managedLedgerCacheEvictionFrequency| Configure the cache eviction frequency for the managed ledger cache (evictions/sec) | 100.0 | |managedLedgerCacheEvictionTimeThresholdMillis| All entries that have stayed in cache for more than the configured time, will be evicted | 1000 | |managedLedgerCursorBackloggedThreshold| Configure the threshold (in number of entries) from where a cursor should be considered 'backlogged' and thus should be set as inactive. | 1000| |managedLedgerDefaultMarkDeleteRateLimit| 限制由消费者确认消息产生的每秒写入频率 |1.0| |managedLedgerMaxEntriesPerLedger| 在触发倒转前追加至 ledger 的最大条目数。 A ledger rollover is triggered after the min rollover time has passed and one of the following conditions is true:</p>
<ul>
<li>已达到最大滚动时间</li>
<li>The max entries have been written to the ledger</li>
<li>The max ledger size has been written to the ledger|50000| |managedLedgerMinLedgerRolloverTimeMinutes| Minimum time between ledger rollover for a topic |10| |managedLedgerMaxLedgerRolloverTimeMinutes| Maximum time before forcing a ledger rollover for a topic |240| |managedLedgerInactiveLedgerRolloverTimeSeconds| Time to rollover ledger for inactive topic |0| |managedLedgerCursorMaxEntriesPerLedger| Max number of entries to append to a cursor ledger |50000| |managedLedgerCursorRolloverTimeInSeconds| Max time before triggering a rollover on a cursor ledger |14400| |managedLedgerMaxUnackedRangesToPersist| Max number of “acknowledgment holes” that are going to be persistently stored. When acknowledging out of order, a consumer will leave holes that are supposed to be quickly filled by acking all the messages. The information of which messages are acknowledged is persisted by compressing in “ranges” of messages that were acknowledged. After the max number of ranges is reached, the information will only be tracked in memory and messages will be redelivered in case of crashes. |1000| |autoSkipNonRecoverableData| Skip reading non-recoverable/unreadable data-ledger under managed-ledger’s list.It helps when data-ledgers gets corrupted at bookkeeper and managed-cursor is stuck at that ledger. |false| |loadBalancerEnabled|启用负载均衡器|true| |loadBalancerPlacementStrategy| 指派新捆绑的策略 weightedRandomSelection || |loadBalancerReportUpdateThresholdPercentage|触发负载报告更新的变化百分比|10| |loadBalancerReportUpdateMaxIntervalMinutes|更新负载报告的最大间隔时间 |15| |loadBalancerHostUsageCheckIntervalMinutes|收集报告的频率 |1| |loadBalancerSheddingIntervalMinutes| 负载削减的间隔时间。 Broker定期检查一些流量是否应该从一些超负荷的broker那里移动到其他低负荷的broker那里|30| |loadBalancerSheddingGracePeriodMinutes|防止同一主题在此时间范围内被舍弃并转移到其他broker超过一次。 |loadBalancerBrokerMaxTopics| 使用阈值来分配最大数量的主题给broker |50000| |loadBalancerBrokerUnderloadedThresholdPercentage| 使用阈值来确定broker是否处于低负荷状态 |1| |loadBalancerBrokerOverloadedThresholdPercentage|确定broker过载的使用阈值 |85| |loadBalancerResourceQuotaUpdateIntervalMinutes|更新命名空间捆绑资源配额的时间间隔 |15| |loadBalancerBrokerComfortLoadLevelPercentage| 使用阈值来确定broker的负载水平恰到好处 |65| |loadBalancerAutoBundleSplitEnabled| 启用/禁用命名空间捆绑自动分割|false| |loadBalancerNamespaceBundleMaxTopics|一个捆绑中的最大主题，否则将触发捆绑分割。 |loadBalancerNamespaceBundleMaxSessions| 捆绑中的最大会话（生产者+消费者），否则将触发捆绑拆分 |1000|</li>
</ul></li>
</ul></li>
</ul>
<pre><code class="hljs">    可用的值: 
    - `org.apache.pulsar.broker.loadbalance.impl.ThresholdShedder`
    - `org.apache.pulsar.broker.loadbalance.impl.OverloadShedder`
    - `org.apache.pulsar.broker.loadbalance.impl.UniformLoadShedder`
      
    关于脱落策略的比较，请参考 [here](administration-load-balance/#shed-load-automatically).|`org.apache.pulsar.broker.loadbalance.impl.ThresholdShedder` |replicationMetricsEnabled|启用复制指标|true| |replicationConnectionsPerBroker|为远程集群中的每个代理打开的最大连接数 更多的主机到主机的连接导致在高延迟链接上有更好的吞吐量。 |16| |replicationProducerQueueSize|复制器生产者队列大小|1000||。 |replicatorPrefix|复制器生产者名称和游标名称pulsar.repl||使用的复制器前缀。 |transactionCoordinatorEnabled|是否在broker中启用交易协调器。 |transactionMetadataStoreProviderClassName| |org.apache.pulsar.transaction.coordinator.impl.InMemTransactionMetadataStoreProvider|| |defaultRetentionTimeInMinutes|默认消息保留时间|0| |defaultRetentionSizeInMB| 默认保留大小|0| |keepAliveIntervalSeconds|多久检查一次连接是否还活着 |30| |bootstrapNamespaces| 引导器名称。 | N/A | |loadManagerClassName|使用的负载管理器的名称|org.apache.pulsar.broker.loadbalance.impl.SimpleLoadManagerImpl|。 |supportedNamespaceBundleSplitAlgorithms|支持的命名空间捆绑分割算法名称|[range_equally_divide,topic_count_equally_divide]| |defaultNamespaceBundleSplitAlgorithm| 命名空间束分割的默认算法名称|range_equally_divide| |managedLedgerOffloadDriver|所有卸载器实现的目录 `offloadersDirectory=./offloaders`. Driver to use to offload old data to long term storage (Possible values: S3, aws-s3, google-cloud-storage). 当使用google-cloud-storage时，确保项目启用了Google Cloud Storage和Google Cloud Storage JSON API（从开发者控制台 -&gt; Api&amp;auth -&gt; APIs检查）。 || |managedLedgerOffloadMaxThreads| Maximum number of thread pool threads for ledger offloading |2| |managedLedgerOffloadPrefetchRounds|The maximum prefetch rounds for ledger reading for offloading.|1| |managedLedgerUnackedRangesOpenCacheSetEnabled| Use Open Range-Set to cache unacknowledged messages |true| |managedLedgerOffloadDeletionLagMs|Delay between a ledger being successfully offloaded to long term storage and the ledger being deleted from bookkeeper | 14400000| |managedLedgerOffloadAutoTriggerSizeThresholdBytes|The number of bytes before triggering automatic offload to long term storage |-1 (disabled)| |s3ManagedLedgerOffloadRegion| For Amazon S3 ledger offload, AWS region || |s3ManagedLedgerOffloadBucket| For Amazon S3 ledger offload, Bucket to place offloaded ledger into || |s3ManagedLedgerOffloadServiceEndpoint| For Amazon S3 ledger offload, Alternative endpoint to connect to (useful for testing) || |s3ManagedLedgerOffloadMaxBlockSizeInBytes| For Amazon S3 ledger offload, Max block size in bytes. (64MB by default, 5MB minimum) |67108864| |s3ManagedLedgerOffloadReadBufferSizeInBytes| For Amazon S3 ledger offload, Read buffer size in bytes (1MB by default) |1048576| |gcsManagedLedgerOffloadRegion|For Google Cloud Storage ledger offload, region where offload bucket is located. Go to this page for more details: https://cloud.google.com/storage/docs/bucket-locations .|N/A| |gcsManagedLedgerOffloadBucket|For Google Cloud Storage ledger offload, Bucket to place offloaded ledger into.|N/A| |gcsManagedLedgerOffloadMaxBlockSizeInBytes|For Google Cloud Storage ledger offload, the maximum block size in bytes. (64MB by default, 5MB minimum)|67108864| |gcsManagedLedgerOffloadReadBufferSizeInBytes|For Google Cloud Storage ledger offload, Read buffer size in bytes. (1MB by default)|1048576| |gcsManagedLedgerOffloadServiceAccountKeyFile|For Google Cloud Storage, path to json file containing service account credentials. For more details, see the &quot;Service Accounts&quot; section of https://support.google.com/googleapi/answer/6158849 .|N/A| |fileSystemProfilePath|For File System Storage, file system profile path.|../conf/filesystem_offload_core_site.xml| |fileSystemURI|For File System Storage, file system uri.|N/A| |s3ManagedLedgerOffloadRole| For Amazon S3 ledger offload, provide a role to assume before writing to s3 || |s3ManagedLedgerOffloadRoleSessionName| For Amazon S3 ledger offload, provide a role session name when using a role |pulsar-s3-offload| | acknowledgmentAtBatchIndexLevelEnabled | Enable or disable the batch index acknowledgement. | false | |enableReplicatedSubscriptions|Whether to enable tracking of replicated subscriptions state across clusters.|true| |replicatedSubscriptionsSnapshotFrequencyMillis|The frequency of snapshots for replicated subscriptions tracking.|1000| |replicatedSubscriptionsSnapshotTimeoutSeconds|The timeout for building a consistent snapshot for tracking replicated subscriptions state.|30| |replicatedSubscriptionsSnapshotMaxCachedPerSubscription|The maximum number of snapshot to be cached per subscription.|10| |maxMessagePublishBufferSizeInMB|The maximum memory size for a broker to handle messages that are sent by producers. If the processing message size exceeds this value, the broker stops reading data from the connection. The processing messages refer to the messages that are sent to the broker but the broker has not sent response to the client. Usually the messages are waiting to be written to bookies. It is shared across all the topics running in the same broker. 值 `-1` 禁用内存限制。 By default, it is 50% of direct memory.|N/A| |messagePublishBufferCheckIntervalInMillis|Interval between checks to see if message publish buffer size exceeds the maximum. 使用 `0` 或负数以禁用最大发布缓冲区限制。|100| |保留复选间隔|检查间隔以检查是否需要剪切。 Use 0 or negative number to disable the check.|120| | maxMessageSize | Set the maximum size of a message. | 5242880 | | preciseTopicPublishRateLimiterEnable | Enable precise topic publish rate limiting. | false | | lazyCursorRecovery | Whether to recover cursors lazily when trying to recover a managed ledger backing a persistent topic. It can improve write availability of topics. The caveat is now when recovered ledger is ready to write we're not sure if all old consumers' last mark delete position(ack position) can be recovered or not. So user can make the trade off or have custom logic in application to checkpoint consumer state.| false |  
    |haproxyProtocol启用 | 启用或禁用 [HAProxy](http://www.haproxy.org/) 协议 |false| | maxNamespacesPerTenant | 可以在每个租户中创建的命名空间的最大数量。 When the number of namespaces reaches this threshold, the broker rejects the request of creating a new tenant. The default value 0 disables the check. |0| | maxTopicsPerNamesspace | 可以在命名空间中创建的持久主题的最大数量。 When the number of topics reaches this threshold, the broker rejects the request of creating a new topic, including the auto-created topics by the producer or consumer, until the number of connected consumers decreases. The default value 0 disables the check. | 0 | |subscriptionTypesEnabled| Enable all subscription types, which are exclusive, shared, failover, and key_shared. | Exclusive, Shared, Failover, Key_Shared | | managedLedgerInfoCompressionType | Compression type of managed ledger information.   
      
    可用选项： `NONE`, `LZ4`, `ZLIB`, `ZSTD`, and `SNAPPY`).   
      
    如果此值是 `NONE` 或无效的 `managedLedgerInfo` 不压缩   
      
    **Note** 在启用此配置后，如果你想要降低broker,，你需要将该值更改为 `NONE` 并确保所有分类的元数据的保存不被压缩。| 无 | | additionalServlets | 额外的Servlet名称。   
      
    如果你有多个额外的服务器，用逗号分隔它们。   
      
    例如，additionalServlet_1, additionalServlet_2 | N/A| | additionalServletDirectory | broker额外的服务目录位置| 。 brokerAdditionalServlet | | brokerEntryMetadataIntercertors | 设置broker条目元数据拦截器。  
      
    多个拦截器应该用逗号分开。   
      
    可用的值:
    - org.apache.pulsar.common.intercept.AppendBrokerTimestampMetadataInterceptor
    - org.apache.pulsar.common.intercept.AppendIndexMetadataInterceptor
      
      
    示例  
    brokerEntryMetadataInterceptors=org.apache.pulsar.common.intercept.AppendBrokerTimestampMetadataInterceptor, org.apache.pulsar.common.intercept.AppendIndexMetadataInterceptor|N/A |。 | 是否将broker条目的元数据暴露给客户端。  
      
    可用的值:
    - true
    - false
      
    示例  
    启用ExposingBrokerEntryMetadataToClient=true | false | | strictBookieAffinity启用 | 启用或禁用严格的 bookie 隔离策略。如果启用，   
    - `bookie-ensemble` 首次尝试选择属于命名空间亲和性群组的bookies。 如果bookies数量不够，则选择其他bookies。   
    - 如果命名空间没有亲和力组， `bookie-ensemble` 只选择属于任何区域的bookie。如果bookies数量还不够， `BKNotEnoughBookiesException` 被抛出。| false |&lt;/p&gt; 
    #### 废弃的Broker的参数
    
    在`conf/broker.conf`文件中，以下参数已被废弃。
    
    | 配置项                                          | 说明                                                             | 默认值   |
    | -------------------------------------------- | -------------------------------------------------------------- | ----- |
    | backlogQuotaDefaultLimitGB                   | 使用 `backlogQuotaDefaultLimitBytes` 代替。                         | -1    |
    | brokerServicePurgeInactiveFrequencyInSeconds | 使用 `brokerDeleteInactiveTopicsFrequencySeconds`。               | 60    |
    | tlsEnabled                                   | 使用 `webServicePortgls` 和 `brokerServicePortls` 代替。             | false |
    | replicationTlsEnabled                        | 在与其他集群对话时启用TLS以复制消息。使用 `经纪ClientTls启用`。                        | false |
    | subscriptionKeySharedEnable                  | 是否启用 Key_Shared 订阅。使用 `订阅类型启用`。                                | true  |
    | zookeeperServers                             | Zookeeper 法定连接字符串。使用 `metadataStoreUrl` 代替。                    | N/A   |
    | configurationStoreServers                    | 配置存储连接字符串(作为逗号分隔的列表)。使用 `configurationMetadataStoreUrl` 代替。    | N/A   |
    | zooKeeperSessionTimeoutMillis                | ZooKeeper会话超时（以毫秒为单位）。使用`metadataStoreSessionTimeoutMillis`代替。 | 30000 |
    | zooKeeperCacheExpirySeconds                  | ZooKeeper 缓存过期时间以秒为单位。使用 `metdataStoreCacheExpirySeconds` 代替。  | 300   |
    
    ## Client
    
    You can use the [`pulsar-client`](/docs/zh-CN/next/reference-cli-tools#pulsar-client) CLI tool to publish messages to and consume messages from Pulsar topics. You can use this tool in place of a client library.
    
    TLS TrustStore type configuration. 
    
    - JKS 
        - PKCS12&lt;/td&gt; 
            &lt;/tr&gt; 
            &lt;/tbody&gt; &lt;/table&gt; 
            ## Log4j
            
            您可以在 [log4j2.yaml](https://github.com/apache/pulsar/blob/d557e0aa286866363bc6261dec87790c055db1b0/conf/log4j2.yaml#L155) 文件中设置日志级别和配置。 以下日志配置参数是可用的：
            
            | 配置项                                                 | 默认值                                             |
            | --------------------------------------------------- | ----------------------------------------------- |
            | pulsar.root.logger                                  | WARN,CONSOLE                                    |
            | pulsar.log.dir                                      | logs                                            |
            | pulsar.log.file                                     | pulsar.log                                      |
            | log4j.rootLogger                                    | ${pulsar.root.logger}                           |
            | log4j.appender.CONSOLE                              | org.apache.log4j.ConsoleAppender                |
            | log4j.appender.CONSOLE.Threshold                    | DEBUG                                           |
            | log4j.appender.CONSOLE.layout                       | org.apache.log4j.PatternLayout                  |
            | log4j.appender.CONSOLE.layout.ConversionPattern     | %d{ISO8601} - %-5p - [%t:%C{1}@%L] - %m%n       |
            | log4j.appender.ROLLINGFILE                          | org.apache.log4j.DailyRollingFileAppender       |
            | log4j.appender.ROLLINGFILE.Threshold                | DEBUG                                           |
            | log4j.appender.ROLLINGFILE.File                     | ${pulsar.log.dir}/${pulsar.log.file}            |
            | log4j.appender.ROLLINGFILE.layout                   | org.apache.log4j.PatternLayout                  |
            | log4j.appender.ROLLINGFILE.layout.ConversionPattern | %d{ISO8601} - %-5p [%t:%C{1}@%L] - %m%n         |
            | log4j.appender.TRACEFILE                            | org.apache.log4j.FileAppender                   |
            | log4j.appender.TRACEFILE.Threshold                  | TRACE                                           |
            | log4j.appender.TRACEFILE.File                       | pulsar-trace.log                                |
            | log4j.appender.TRACEFILE.layout                     | org.apache.log4j.PatternLayout                  |
            | log4j.appender.TRACEFILE.layout.ConversionPattern   | %d{ISO8601} - %-5p \[%t:%C{1}@%L\]\[%x\] - %m%n |
            
            &gt; 注意：log4j2.appender 中的“topic”是可配置的。 - 如果你想要将所有日志追加到单个主题，请设置相同的主题名称。 - 如果你想要将日志追加到不同的主题，你可以设置不同的主题名称。
            
            ## Log4j shell
            
            | 配置项                                                   | 默认值                              |
            | ----------------------------------------------------- | -------------------------------- |
            | bookkeeper.root.logger                                | ERROR,CONSOLE                    |
            | log4j.rootLogger                                      | ${bookkeeper.root.logger}        |
            | log4j.appender.CONSOLE                                | org.apache.log4j.ConsoleAppender |
            | log4j.appender.CONSOLE.Threshold                      | DEBUG                            |
            | log4j.appender.CONSOLE.layout                         | org.apache.log4j.PatternLayout   |
            | log4j.appender.CONSOLE.layout.ConversionPattern       | %d{ABSOLUTE} %-5p %m%n           |
            | log4j.logger.org.apache.zookeeper                     | ERROR                            |
            | log4j.logger.org.apache.bookkeeper                    | ERROR                            |
            | log4j.logger.org.apache.bookkeeper.bookie.BookieShell | INFO                             |
            
            ## Standalone
            
            TLS KeyStore type configuration in the broker.
            
            - JKS 
                - PKCS12&lt;/td&gt; 
                    &lt;/tr&gt; 
                    TLS TrustStore type configuration in the broker
                    
                    - JKS 
                        - PKCS12&lt;/td&gt; 
                            &lt;/tr&gt; 
                            TLS TrustStore type configuration for the internal client to authenticate with Pulsar brokers. 
                            
                            - JKS 
                                - PKCS12&lt;/td&gt; 
                                    &lt;/tr&gt; 
                                    &lt;/tbody&gt; &lt;/table&gt; 
                                    #### 废弃的独立Pulsar参数
                                    
                                    以下参数已在 `conf/standalone.conf` 文件中被废弃。
                                    
                                    | 配置项                              | 说明                                                                                     | 默认值   |
                                    | -------------------------------- | -------------------------------------------------------------------------------------- | ----- |
                                    | zookeeperServers                 | The quorum connection string for local metadata store. Use `metadataStoreUrl` instead. | N/A   |
                                    | configurationStoreServers        | 配置存储连接字符串(作为逗号分隔的列表)。使用 `configurationMetadataStoreUrl` 代替。                            | N/A   |
                                    | zooKeeperOperationTimeoutSeconds | ZooKeeper行动超时（以毫秒为单位）。使用`metadataStoreSessionTimeoutMillis`代替。                         | 30    |
                                    | zooKeeperCacheExpirySeconds      | ZooKeeper 缓存过期时间以秒为单位。使用 `metdataStoreCacheExpirySeconds` 代替。                          | 300   |
                                    | zooKeeperSessionTimeoutMillis    | ZooKeeper会话超时（以毫秒为单位）。使用`metadataStoreSessionTimeoutMillis`代替。                         | 30000 |
                                    
                                    ## WebSocket
                                    
                                    | 配置项                                  | 说明                | 默认值     |
                                    | ------------------------------------ | ----------------- | ------- |
                                    | configurationMetadataStoreUrl        | 配置存储连接字符串。        | N/A     |
                                    | metadataStoreSessionTimeoutMillis    | 元数据存储会话超时时间 （毫秒）。 | 30000   |
                                    | metadataStoreCacheExpirySeconds      | 元数据存储缓存过期时间（秒）    | 300     |
                                    | serviceUrl                           |                   |         |
                                    | serviceUrlTls                        |                   |         |
                                    | brokerServiceUrl                     |                   |         |
                                    | brokerServiceUrlTls                  |                   |         |
                                    | webServicePort                       |                   | 8080    |
                                    | webServicePortTls                    |                   | 8443    |
                                    | bindAddress                          |                   | 0.0.0.0 |
                                    | clusterName                          |                   |         |
                                    | authenticationEnabled                |                   | false   |
                                    | authenticationProviders              |                   |         |
                                    | authorizationEnabled                 |                   | false   |
                                    | superUserRoles                       |                   |         |
                                    | brokerClientAuthenticationPlugin     |                   |         |
                                    | brokerClientAuthenticationParameters |                   |         |
                                    | tlsEnabled                           |                   | false   |
                                    | tlsAllowInsecureConnection           |                   | false   |
                                    | tlsCertificateFilePath               |                   |         |
                                    | tlsKeyFilePath                       |                   |         |
                                    | tlsTrustCertsFilePath                |                   |         |
                                    
                                    #### 已废弃的 WebSocket 参数
                                    
                                    以下参数已在 `conf/websocket.conf` 文件中被废弃。
                                    
                                    | 配置项                           | 说明                                                             | 默认值   |
                                    | ----------------------------- | -------------------------------------------------------------- | ----- |
                                    | zooKeeperSessionTimeoutMillis | ZooKeeper会话超时（以毫秒为单位）。使用`metadataStoreSessionTimeoutMillis`代替。 | 30000 |
                                    | zooKeeperCacheExpirySeconds   | ZooKeeper 缓存过期时间以秒为单位。使用 `metdataStoreCacheExpirySeconds` 代替。  | 300   |
                                    | configurationStoreServers     | 配置存储连接字符串。使用 `configurationMetadataStoreUrl` 代替。               | N/A   |
                                    
                                    ## Pulsar 代理
                                    
                                    The [Pulsar proxy](/docs/zh-CN/next/concepts-architecture-overview#pulsar-proxy) can be configured in the `conf/proxy.conf` file.
                                    
                                    Proxy log level 
                                    
                                    - 0: Do not log any TCP channel information. 
                                        - 1: Parse and log any TCP channel information and command information without message body. 
                                            - 2: Parse and log channel information, command information and message body.&lt;/td&gt; 
                                                &lt;/tr&gt; 
                                                &lt;/tbody&gt; &lt;/table&gt; 
                                                #### Deprecated parameters of Pulsar proxy
                                                
                                                在`conf/proxy.conf`文件中，以下参数已被废弃。
                                                
                                                | 配置项                         | 说明                                                                 | 默认值   |
                                                | --------------------------- | ------------------------------------------------------------------ | ----- |
                                                | tlsEnabledInProxy           | Deprecated - use `servicePortTls` and `webServicePortTls` instead. | false |
                                                | zookeeperSessionTimeoutMs   | ZooKeeper会话超时（以毫秒为单位）。使用`metadataStoreSessionTimeoutMillis`代替。     | 30000 |
                                                | zooKeeperCacheExpirySeconds | ZooKeeper 缓存过期时间以秒为单位。使用 `metdataStoreCacheExpirySeconds` 代替。      | 300   |
                                                
                                                ## ZooKeeper
                                                
                                                ZooKeeper handles a broad range of essential configuration- and coordination-related tasks for Pulsar. The default configuration file for ZooKeeper is in the `conf/zookeeper.conf` file in your Pulsar installation. The following parameters are available:
                                                
                                                | 配置项                       | 说明                                                                                                                                                                                                                                                                                         | 默认值            |
                                                | ------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------- |
                                                | tickTime                  | tick 是 Zookeeper 基本的时间单位，以毫秒为单位。用于处理心跳和超时，tickTime 是单个tick的长度。                                                                                                                                                                                                                             | 2000           |
                                                | initLimit                 | Zookeeper leader 服务器允许 follower 服务器成功连接和同步的最大时间。使用 tickTime 参数为时间刻度，以毫秒为单位。                                                                                                                                                                                                                | 10             |
                                                | syncLimit                 | Zookeeper follower 服务器允许从其他 Zookeeper 服务器同步的最大耗时。使用 tickTime 参数为时间刻度，以毫秒为单位。                                                                                                                                                                                                               | 5              |
                                                | dataDir                   | The location where ZooKeeper will store in-memory database snapshots as well as the transaction log of updates to the database.                                                                                                                                                            | data/zookeeper |
                                                | clientPort                | The port on which the ZooKeeper server will listen for connections.                                                                                                                                                                                                                        | 2181           |
                                                | admin.enableServer        | The port at which the admin listens.                                                                                                                                                                                                                                                       | true           |
                                                | admin.serverPort          | The port at which the admin listens.                                                                                                                                                                                                                                                       | 9990           |
                                                | autopurge.snapRetainCount | ZooKeeper 中自动清理决定了在 autopurge.purgeInterval 参数设定的时间间隔内，存储在 dataDir 中的数据库快照数（其他快照会被删除）。                                                                                                                                                                                                     | 3              |
                                                | autopurge.purgeInterval   | The time interval, in hours, by which the ZooKeeper database purge task is triggered. Setting to a non-zero number will enable auto purge; setting to 0 will disable. Read this guide before enabling auto purge.                                                                          | 1              |
                                                | forceSync                 | Requires updates to be synced to media of the transaction log before finishing processing the update. If this option is set to 'no', ZooKeeper will not require updates to be synced to the media. WARNING: it's not recommended to run a production ZK cluster with `forceSync` disabled. | 是              |
                                                | maxClientCnxns            | 客户端连接的最大数量，如果你需要处理更多的 Zookeeper 客户端，就需要增加这个配置项的值。                                                                                                                                                                                                                                          | 60             |
                                                
                                                In addition to the parameters in the table above, configuring ZooKeeper for Pulsar involves adding a `server.N` line to the `conf/zookeeper.conf` file for each node in the ZooKeeper cluster, where `N` is the number of the ZooKeeper node. Here's an example for a three-node ZooKeeper cluster:
                                                
                                                ```properties
                                                server.1=zk1.us-west.example.com:2888:3888
                                                server.2=zk2.us-west.example.com:2888:3888
                                                server.3=zk3.us-west.example.com:2888:3888
                                                ```
                                                
                                                &gt; We strongly recommend consulting the [ZooKeeper Administrator's Guide](https://zookeeper.apache.org/doc/current/zookeeperAdmin.html) for a more thorough and comprehensive introduction to ZooKeeper configuration</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/zh-CN/next/reference-cli-tools"><span class="arrow-prev">← </span><span>Pulsar 命令行工具</span></a><a class="docs-next button" href="/docs/zh-CN/next/reference-metrics"><span>Pulsar Metrics</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#bookkeeper">BookKeeper</a></li><li><a href="#broker">Broker</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2022 The Apache Software Foundation. All Rights Reserved. Apache, Apache Pulsar and the Apache feather logo are trademarks of The Apache Software Foundation.</section><span><script>
      const community = document.querySelector("a[href='#community']").parentNode;
      const communityMenu =
        '<li>' +
        '<a id="community-menu" href="#">Community <span style="font-size: 0.75em">&nbsp;▼</span></a>' +
        '<div id="community-dropdown" class="hide">' +
          '<ul id="community-dropdown-items">' +
            '<li><a href="/zh-CN/contact">Contact</a></li>' +
            '<li><a href="/zh-CN/contributing">Contributing</a></li>' +
            '<li><a href="/zh-CN/coding-guide">Coding guide</a></li>' +
            '<li><a href="/zh-CN/events">Events</a></li>' +
            '<li><a href="https://twitter.com/Apache_Pulsar" target="_blank">Twitter &#x2750</a></li>' +
            '<li><a href="https://github.com/apache/pulsar/wiki" target="_blank">Wiki &#x2750</a></li>' +
            '<li><a href="https://github.com/apache/pulsar/issues" target="_blank">Issue tracking &#x2750</a></li>' +
            '<li><a href="https://pulsar-summit.org/" target="_blank">Pulsar Summit &#x2750</a></li>' +
            '<li>&nbsp;</li>' +
            '<li><a href="/zh-CN/resources">Resources</a></li>' +
            '<li><a href="/zh-CN/team">Team</a></li>' +
            '<li><a href="/zh-CN/powered-by">Powered By</a></li>' +
          '</ul>' +
        '</div>' +
        '</li>';

      community.innerHTML = communityMenu;

      const communityMenuItem = document.getElementById("community-menu");
      const communityDropDown = document.getElementById("community-dropdown");
      communityMenuItem.addEventListener("click", function(event) {
        event.preventDefault();

        if (communityDropDown.className == 'hide') {
          communityDropDown.className = 'visible';
        } else {
          communityDropDown.className = 'hide';
        }
      });
    </script></span></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'd226a455cecdd4bc18a554c1b47e5b52',
                indexName: 'apache_pulsar',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:zh-CN","version:next"]}
              });
            </script></body></html>